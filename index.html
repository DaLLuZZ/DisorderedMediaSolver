<!DOCTYPE html>
<html>
<head>
	<title>Смешной калькулятор</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css" integrity="sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js" integrity="sha384-Rma6DA2IPUwhNxmrB/7S3Tno0YY7sFu9WSYMCuulLhIqYSGZ2gKCJWIqhBWqMQfh" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous"></script>

	<link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://dalluzz.github.io/DisorderedMediaSolver/apple-touch-icon-57x57.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://dalluzz.github.io/DisorderedMediaSolver/apple-touch-icon-114x114.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://dalluzz.github.io/DisorderedMediaSolver/apple-touch-icon-72x72.png" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://dalluzz.github.io/DisorderedMediaSolver/apple-touch-icon-144x144.png" />
	<link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://dalluzz.github.io/DisorderedMediaSolver/apple-touch-icon-60x60.png" />
	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://dalluzz.github.io/DisorderedMediaSolver/apple-touch-icon-120x120.png" />
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://dalluzz.github.io/DisorderedMediaSolver/apple-touch-icon-76x76.png" />
	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://dalluzz.github.io/DisorderedMediaSolver/apple-touch-icon-152x152.png" />
	<link rel="icon" type="image/png" href="https://dalluzz.github.io/DisorderedMediaSolver/favicon-196x196.png" sizes="196x196" />
	<link rel="icon" type="image/png" href="https://dalluzz.github.io/DisorderedMediaSolver/favicon-96x96.png" sizes="96x96" />
	<link rel="icon" type="image/png" href="https://dalluzz.github.io/DisorderedMediaSolver/favicon-32x32.png" sizes="32x32" />
	<link rel="icon" type="image/png" href="https://dalluzz.github.io/DisorderedMediaSolver/favicon-16x16.png" sizes="16x16" />
	<link rel="icon" type="image/png" href="https://dalluzz.github.io/DisorderedMediaSolver/favicon-128.png" sizes="128x128" />
	<meta name="application-name" content="Смешной калькулятор"/>
	<meta name="msapplication-TileColor" content="#5A7E96" />
	<meta name="msapplication-TileImage" content="https://dalluzz.github.io/DisorderedMediaSolver/mstile-144x144.png" />
	<meta name="msapplication-square70x70logo" content="https://dalluzz.github.io/DisorderedMediaSolver/mstile-70x70.png" />
	<meta name="msapplication-square150x150logo" content="https://dalluzz.github.io/DisorderedMediaSolver/mstile-150x150.png" />
	<meta name="msapplication-wide310x150logo" content="https://dalluzz.github.io/DisorderedMediaSolver/mstile-310x150.png" />
	<meta name="msapplication-square310x310logo" content="https://dalluzz.github.io/DisorderedMediaSolver/mstile-310x310.png" />
</head>

<body>
<h1>Смешной калькулятор</h1>
<p>Сделано «на коленке»: быстро, дешево, и сердито</p>

<h2>Прыжки по ближайшим соседям (nearest-neighbor hopping)</h2>

<div>
Размерность пространства:
<select id="dimension">
	<option value=3>3D</option>
	<option value=2>2D</option>
</select>
</div>

<br>

<div>
Диэлектрическая проницаемость ε:
<input type="text" id="epsilon" placeholder="16.3">
</div>

<br>

<div>
Концентрация примеси N, см<sup>-2</sup> или см<sup>-3</sup>:
<input type="text" id="Nconc" placeholder="1E15">
</div>

<br>

<div>
Тип примеси:
<select id="dopant_type">
	<option value="donor">Донорная</option>
	<option value="acceptor">Акцепторная</option>
</select>
</div>

<br>

<div>
Степень компенсации K: 
<input type="text" id="K" placeholder="0.7">
</div>

<br>

<button id="NearestSolve">Решить</button>
<div id="NearestSolveHint">
</div>

<br>

<div id="NearestSolution">
</div>

<br>

<h2>Прыжки с переменной длиной прыжка (variable-range hopping)</h2>

<div>
Размерность пространства:
<select id="dimension_var">
	<option value=3>3D</option>
	<option value=2>2D</option>
</select>
</div>

<br>

<div>
Диэлектрическая проницаемость ε:
<input type="text" id="epsilon_var" placeholder="16.3">
</div>

<br>

<div>
Концентрация примеси N, см<sup>-2</sup> или см<sup>-3</sup>:
<input type="text" id="Nconc_var" placeholder="1E15">
</div>

<br>

<div>
Тип примеси:
<select id="dopant_type_var">
	<option value="donor">Донорная</option>
	<option value="acceptor">Акцепторная</option>
</select>
</div>

<br>

<div>
Для прямозонных полупроводников (GaAs, GaN) в m<sub>l</sub> и m<sub>t</sub> указывать одинаковое значение
</div>

<div>
Если по условию известна средняя эффективная масса m<sub>n</sub><sup>*</sup>, вставить её в оба текстовых поля
</div>

<div>
Продольная эффективная масса m<sub>l</sub> в единицах m<sub>0</sub>:
<input type="text" id="ml_var" placeholder="1.58">
</div>

<div>
Поперечная эффективная масса m<sub>t</sub> в единицах m<sub>0</sub>:
<input type="text" id="mt_var" placeholder="0.082">
</div>

<br>

<div>
Температура, К:
<input type="text" id="T_var" placeholder="1">
</div>

<br>

<div>
Предэкспоненциальный множитель σ<sub>0</sub>, Ом<sup>-1</sup> или Ом<sup>-1</sup> × см<sup>-1</sup>:
<input type="text" id="sigma0_var" placeholder="1">
</div>

<br>

<button id="VRSolve">Решить</button>
<div id="VRHint">
</div>

<div id="VRSolution">
</div>

<script>

const scifyNum = (num, prec) =>
{
	const sci = {};
	[sci.coefficient, sci.exponent] = num.toExponential(prec).split('e').map(item => Number(item));
	if (Math.abs(sci.exponent) <= 1)
	{
		return `${roundFloat(num, prec)}`
	}
	return `${sci.coefficient} \\times {10}^{${sci.exponent}}`
};

const roundFloat = (num, prec) =>
{
	return Math.round(num * (10 ** prec)) / (10 ** prec);
};

renderMathInElement(document.body);

document.getElementById('NearestSolve').addEventListener('click', function()
{
	document.getElementById('NearestSolveHint').innerHTML = null;
	document.getElementById('NearestSolution').innerHTML = null;

	const dim = document.getElementById('dimension').value;
	const eps = parseFloat(document.getElementById('epsilon').value.replace(",", "."));
	const Nconc = parseFloat(document.getElementById('Nconc').value.replace(",", "."));
	const dopant_type = document.getElementById('dopant_type').value;
	const K = parseFloat(document.getElementById('K').value.replace(",", "."));

	console.log(`dim = ${dim}`);
	console.log(`Epsilon = ${eps}`);
	console.log(`N = ${Nconc}`);
	console.log(dopant_type);
	if (dopant_type == "donor")
	{
		console.log("Донорная примесь");
	}
	else if (dopant_type == "acceptor")
	{
		console.log("Акцепторная примесь");
	}
	console.log(`K = ${K}`);

	if (eps < 1.0 || K < 0 || K > 1 || K == 0.5 || isNaN(eps) || isNaN(Nconc) || isNaN(K))
	{
		document.getElementById('NearestSolveHint').innerHTML = "Неверный ввод";
		return;
	}

	// Входные данные валидны
	
	const Nsub = dopant_type == "donor" ? "D" : "A";

	const q = 1.6 * 1E-19;
	const eps0 = 8.85 * 1E-14;
	const pi = 3.1415926535;

	var F = -1 + (1 - K) * 2;
	if (dopant_type == "acceptor")
	{
		F = -1 + K * 2;
	}
	const r = Nconc ** (-1/dim);
	const dE = q * q / (4 * pi * eps * eps0 * r);
	const dE_ev = dE / q;
	const Ea = Math.abs(F) * dE_ev;

	const solution = document.getElementById('NearestSolution');
	solution.innerHTML = null;

	solution.innerHTML += "<p>Требуется найти E<sub>а</sub> (энергию активации прыжковой проводимости прыжков по ближайшим соседям)</p>";
	solution.innerHTML += "<p>Введенные данные:</p>";
	solution.innerHTML += `<span>$$\\varepsilon = ${eps}$$</span>`;
	solution.innerHTML += `<span>$$N_${Nsub} = ${scifyNum(Nconc, 3)} {cm}^{-${dim}}$$</span>`;
	solution.innerHTML += `<span>$$K = ${K}$$</span>`;

	solution.innerHTML += "<h3>Решение</h3>";

	solution.innerHTML += `<p>${roundFloat(100 * K, 2)}% от N<sub>${Nsub}</sub> ионизованы, т.е. ${dopant_type == "donor" ? "не заняты" : "заполнены"} электронами<br>${roundFloat(100 * (1 - K), 2)}% от N<sub>${Nsub}</sub> не ионизованы, т.е. ${dopant_type == "donor" ? "заполнены" : "не заняты"} электронами</p>`;

	solution.innerHTML += `<p>Плотность состояний в интервале энергии от -ΔE<sub>${Nsub}</sub> до +ΔE<sub>${Nsub}</sub> принимается постоянной</p>`;

	solution.innerHTML += `Положение уровня Ферми относительно E<sub>${Nsub}</sub> в единицах ΔE<sub>${Nsub}</sub>:`;
	if (dopant_type == "donor")
	{
		solution.innerHTML += `<span>$$\\frac{F - E_${Nsub}}{\\Delta E_${Nsub}} = -1 + (1 - K) \\times (1 - (-1))$$</span>`;
		solution.innerHTML += `<span>$$\\frac{F - E_${Nsub}}{\\Delta E_${Nsub}} = -1 + (1 - ${K}) \\times 2$$</span>`;
	}
	else if (dopant_type == "acceptor")
	{
		solution.innerHTML += `<span>$$\\frac{F - E_${Nsub}}{\\Delta E_${Nsub}} = -1 + K \\times (1 - (-1))$$</span>`;
		solution.innerHTML += `<span>$$\\frac{F - E_${Nsub}}{\\Delta E_${Nsub}} = -1 + ${K} \\times 2$$</span>`;
	}
	solution.innerHTML += `<span>$$\\frac{F - E_${Nsub}}{\\Delta E_${Nsub}} = ${roundFloat(F, 2)}$$</span>`;

	solution.innerHTML += "Среднее расстояние между атомами примеси:";
	solution.innerHTML += `<span>$$r = N_{${Nsub}}^{-\\frac{1}{${dim}}}$$</span>`;
	solution.innerHTML += `<span>$$r = {(${scifyNum(Nconc, 3)})}^{-\\frac{1}{${dim}}}$$</span>`;
	solution.innerHTML += `<span>$$r = ${scifyNum(r, 3)} cm$$</span>`;

	solution.innerHTML += "Энергия кулоновского взаимодействия:";
	solution.innerHTML += `<span>$$\\Delta E_${Nsub} = \\frac{q^2}{4\\pi \\varepsilon \\varepsilon_0 r}$$</span>`;
	solution.innerHTML += `<span>$$\\Delta E_${Nsub} = \\frac{(1.6 \\times {10}^{-19})^2}{4 \\times 3.14 \\times ${eps} \\times (8.85 \\times {10}^{-14}) \\times (${scifyNum(r, 3)})}$$</span>`;
	solution.innerHTML += `<span>$$\\Delta E_${Nsub} = ${scifyNum(dE, 3)} J$$</span>`;

	solution.innerHTML += "Проверка размерности:";
	solution.innerHTML += `<span>$$[\\Delta E_${Nsub}] = \\frac{C^2}{\\frac{F}{cm} \\times cm}$$</span>`;
	solution.innerHTML += `<span>$$[\\Delta E_${Nsub}] = C \\times \\frac{C}{F} = C \\times \\frac{C}{C/V}$$</span>`;
	solution.innerHTML += `<span>$$[\\Delta E_${Nsub}] = C \\times V = J$$</span>`;

	solution.innerHTML += "Перевод из Дж в эВ (1 эВ = 1.6 × 10<sup>-19</sup> Дж):";
	solution.innerHTML += `<span>$$\\Delta E_${Nsub} = ${scifyNum(dE_ev, 3)} eV$$</span>`;

	solution.innerHTML += "Энергия активации прыжковой проводимости прыжков по ближайшим соседям:";
	solution.innerHTML += `<span>$$E_a = |\\frac{F - E_${Nsub}}{\\Delta E_${Nsub}}| \\times \\Delta E_${Nsub}$$</span>`;
	solution.innerHTML += `<span>$$E_a = |${roundFloat(F, 2)}| \\times (${scifyNum(dE_ev, 3)})$$</span>`;
	solution.innerHTML += `<span>$$E_a = ${scifyNum(Ea, 3)} eV$$</span>`;

	renderMathInElement(solution);
});

document.getElementById('VRSolve').addEventListener('click', function()
{
	document.getElementById('VRHint').innerHTML = null;
	document.getElementById('VRSolution').innerHTML = null;

	const dim = document.getElementById('dimension_var').value;
	const eps = parseFloat(document.getElementById('epsilon_var').value.replace(",", "."));
	const Nconc = parseFloat(document.getElementById('Nconc_var').value.replace(",", "."));
	const dopant_type = document.getElementById('dopant_type_var').value;
	const mt = parseFloat(document.getElementById('mt_var').value.replace(",", "."));
	const ml = parseFloat(document.getElementById('ml_var').value.replace(",", "."));
	const T = parseFloat(document.getElementById('T_var').value.replace(",", "."));
	const sigma0 = parseFloat(document.getElementById('sigma0_var').value.replace(",", "."));

	console.log(`dim = ${dim}`);
	console.log(`Epsilon = ${eps}`);
	console.log(`N = ${Nconc}`);
	console.log(dopant_type);
	if (dopant_type == "donor")
	{
		console.log("Донорная примесь");
	}
	else if (dopant_type == "acceptor")
	{
		console.log("Акцепторная примесь");
	}
	console.log(`mt = ${mt}`);
	console.log(`ml = ${ml}`);
	console.log(`T = ${T}`);
	console.log(`sigma0 = ${sigma0}`);

	if (eps < 1.0 || mt < 0 || ml < 0 || T <= 0 || isNaN(eps) || isNaN(Nconc) || isNaN(mt) || isNaN(mt) || isNaN(T) || (!isNaN(sigma0) && sigma0 < 0))
	{
		document.getElementById('VRHint').innerHTML = "Неверный ввод";
		return;
	}

	// Входные данные валидны
	
	const Nsub = dopant_type == "donor" ? "D" : "A";

	const q = 1.6 * 1E-19; // C
	const eps0 = 8.85 * 1E-14; // F/cm
	const pi = 3.1415926535;
	const kB = 8.617333262 * 1E-5; // eV/K

	const r = Nconc ** (-1/dim);
	const dE = q * q / (4 * pi * eps * eps0 * r);
	const dE_ev = dE / q;
	const g = Nconc / (2 * dE_ev); // eV^-1 cm^-dim
	var meff = (ml * (mt ** (dim - 1))) ** (1 / dim)
	if (ml == mt)
	{
		meff = ml;
	}
	const aB_A = 0.53 * eps / meff;
	const aB_cm = aB_A * 1E-8;
	var T0 = 0;
	if (dim == 3)
	{
		T0 = (((2 ** (3/4)) * (3 ** (-1/4)) * ((3 ** (1 / 2)) + (3 ** (-1 / 2)))) ** 4) * (aB_cm ** (-dim)) * (g ** (-1)) * (kB ** (-1));
	}
	else if (dim == 2)
	{
		T0 = 27 * (aB_cm ** (-dim)) * (g ** (-1)) * (kB ** (-1));
	}
	const Ea = ((2 / dim) ** (dim / (parseInt(dim) + 1))) * (g ** (-1 / (parseInt(dim) + 1))) * (aB_cm ** (-dim / (parseInt(dim) + 1))) * (kB ** (dim / (parseInt(dim) + 1))) * (T ** (dim / (parseInt(dim) + 1)));
	const rH = (g * Ea) ** (-1 / dim);
	var U = 0;
	if (dim == 3)
	{
		U = -((2 ** (3/4)) * (3 ** (-1/4)) * ((3 ** (1 / 2)) + (3 ** (-1 / 2)))) * (aB_cm ** (-dim / (parseInt(dim) + 1))) * (g ** (-1 / (parseInt(dim) + 1))) * (kB ** (-1 / (parseInt(dim) + 1))) * (T ** (-1 / (parseInt(dim) + 1)));
	}
	else if (dim == 2)
	{
		U = -3 * (aB_cm ** (-dim / (parseInt(dim) + 1))) * (g ** (-1 / (parseInt(dim) + 1))) * (kB ** (-1 / (parseInt(dim) + 1))) * (T ** (-1 / (parseInt(dim) + 1)));
	}
	const sigma = sigma0 * Math.exp(U);
	//const sigma = sigma0 * Math.exp(-(2 * rH / aB_cm) - (Ea / (kB * T)));

	const solution = document.getElementById('VRSolution');
	solution.innerHTML = null;

	solution.innerHTML += "<p>Требуется произвести расчет модели прыжковой проводимости с переменной длиной прыжка для заданного материала</p>";
	solution.innerHTML += `<p>Согласно модельным представлениям, величина энергии активации E<sub>a</sub> прыжковой проводимости с переменной длиной прыжка зависит от температуры, а температурная зависимость удельной электрической проводимости описывается выражением следующего вида${dim == 2 ? " (с учетом размерности пространства)" : ""}:</p>`;

	solution.innerHTML += `<span>$$\\sigma = \\sigma_0 \\times exp(-{\\frac{2{N_${Nsub}}^{-\\frac{1}{${dim}}}}{a_B}}-{\\frac{E{a}}{{k}_{B} T}}) $$</span>`;
	solution.innerHTML += `<span>$$\\sigma = \\sigma_0 \\times exp(-{(\\frac{T_0}{T})}^{\\frac{1}{${parseInt(dim) + 1}}}) $$</span>`;
	solution.innerHTML += `<span>$$\\sigma = \\sigma_0 \\times exp(U) $$</span>`;

	solution.innerHTML += "<p>Введенные данные:</p>";
	solution.innerHTML += `<span>$$\\varepsilon = ${eps}$$</span>`;
	solution.innerHTML += `<span>$$N_${Nsub} = ${scifyNum(Nconc, 3)} {cm}^{-${dim}}$$</span>`;
	if (ml != mt)
	{
		solution.innerHTML += `<span>$$m_l = ${ml}m_0$$</span>`;
		solution.innerHTML += `<span>$$m_t = ${mt}m_0$$</span>`;
	}
	else
	{
		solution.innerHTML += `<span>$$m_n^\\ast = ${meff}m_0$$</span>`;
	}
	solution.innerHTML += `<span>$$T = ${scifyNum(T, 3)} K$$</span>`;
	if (!isNaN(sigma0))
	{
		solution.innerHTML += `<span>$$ \\sigma_0 = ${scifyNum(sigma0, 3)} \\Omega^{-1} ${dim == 3 ? "\\times {cm}^{-1}" : ""} $$</span>`;
	}

	solution.innerHTML += "<h3>Решение</h3>";

	solution.innerHTML += "Среднее расстояние между атомами примеси:";
	solution.innerHTML += `<span>$$r = N_{${Nsub}}^{-\\frac{1}{${dim}}}$$</span>`;
	solution.innerHTML += `<span>$$r = {(${scifyNum(Nconc, 3)})}^{-\\frac{1}{${dim}}}$$</span>`;
	solution.innerHTML += `<span>$$r = ${scifyNum(r, 3)} cm$$</span>`;

	solution.innerHTML += "Энергия кулоновского взаимодействия:";
	solution.innerHTML += `<span>$$\\Delta E_${Nsub} = \\frac{q^2}{4\\pi \\varepsilon \\varepsilon_0 r}$$</span>`;
	solution.innerHTML += `<span>$$\\Delta E_${Nsub} = \\frac{(1.6 \\times {10}^{-19})^2}{4 \\times 3.14 \\times ${eps} \\times (8.85 \\times {10}^{-14}) \\times (${scifyNum(r, 3)})}$$</span>`;
	solution.innerHTML += `<span>$$\\Delta E_${Nsub} = ${scifyNum(dE, 3)} J$$</span>`;

	solution.innerHTML += "Проверка размерности:";
	solution.innerHTML += `<span>$$[\\Delta E_${Nsub}] = \\frac{C^2}{\\frac{F}{cm} \\times cm}$$</span>`;
	solution.innerHTML += `<span>$$[\\Delta E_${Nsub}] = C \\times \\frac{C}{F} = C \\times \\frac{C}{C/V}$$</span>`;
	solution.innerHTML += `<span>$$[\\Delta E_${Nsub}] = C \\times V = J$$</span>`;

	solution.innerHTML += "Перевод из Дж в эВ (1 эВ = 1.6 × 10<sup>-19</sup> Дж):";
	solution.innerHTML += `<span>$$\\Delta E_${Nsub} = ${scifyNum(dE_ev, 3)} eV$$</span>`;

	solution.innerHTML += `<p>Плотность состояний в интервале энергии от -ΔE<sub>${Nsub}</sub> до +ΔE<sub>${Nsub}</sub> принимается постоянной</p>`;

	solution.innerHTML += "Плотность состояний:";
	solution.innerHTML += `<span>$$g = \\frac{N_${Nsub}}{2 \\Delta E_${Nsub}}$$</span>`;
	solution.innerHTML += `<span>$$g = \\frac{${scifyNum(Nconc, 3)}}{2 \\times (${scifyNum(dE_ev, 3)})}$$</span>`
	solution.innerHTML += `<span>$$g = ${scifyNum(g, 3)} {cm}^{-${dim}} \\times {eV}^{-1}$$</span>`

	if (meff != ml && meff != mt)
	{
		solution.innerHTML += `Средняя эффективная масса электронов${dim == 2 ? " (с учетом размерности пространства)" : ""}:`;
		solution.innerHTML += `<span>$$\\frac{m_n^\\ast}{m_0} = \\sqrt[${dim}]{m_l m_t${dim == 3 ? "^2" : ""}}$$</span>`;
		solution.innerHTML += `<span>$$\\frac{m_n^\\ast}{m_0} = \\sqrt[${dim}]{${ml} \\times ${mt}${dim == 3 ? "^2" : ""}}$$</span>`;
		solution.innerHTML += `<span>$$ m_n^\\ast = ${roundFloat(meff, 3)}m_0$$</span>`;
	}

	solution.innerHTML += "Боровский радиус:";
	solution.innerHTML += `<span>$$ {a_B} = 0.53 \\times \\varepsilon \\frac{m_0}{m_n^\\ast}$$</span>`;
	solution.innerHTML += `<span>$$ {a_B} = 0.53 \\times ${eps} \\times \\frac{1}{${roundFloat(meff, 3)}}$$</span>`;
	solution.innerHTML += `<span>$$ {a_B} = ${roundFloat(aB_A, 2)} \\text{\\AA} $$</span>`;

	solution.innerHTML += "Перевод из Å в см (1 Å = 10<sup>-8</sup> см):";
	solution.innerHTML += `<span>$$ {a_B} = ${scifyNum(aB_cm, 3)} cm$$</span>`;

	solution.innerHTML += "Температура T<sub>0</sub>:";
	solution.innerHTML += `<span>$$ {T_0} = \\frac{${dim == 3 ? "75.852" : "27"}}{g {a_B^${dim}} {k_B}}$$</span>`;
	solution.innerHTML += `<span>$$ {T_0} = ${dim == 3 ? "75.852" : "27"} \\times g^{-1} {a_B^{-${dim}}} k_B^{-1}$$</span>`;
	solution.innerHTML += `<span>$$ {T_0} = ${dim == 3 ? "75.852" : "27"} \\times {(${scifyNum(g, 3)})}^{-1} \\times {(${scifyNum(aB_cm, 3)})}^{-${dim}} \\times {(${scifyNum(kB, 3)})}^{-1}$$</span>`;
	solution.innerHTML += `<span>$$ {T_0} = ${scifyNum(T0, 3)} K$$</span>`;

	solution.innerHTML += "Проверка размерности:";
	solution.innerHTML += `<span>$$ [T_0] = \\frac{1}{({cm}^{-${dim}} \\times {eV}^{-1}) \\times {cm}^{${dim}} \\times \\frac{eV}{K}}$$</span>`;
	solution.innerHTML += `<span>$$ [T_0] = K$$</span>`;

	solution.innerHTML += `Энергия активации (при заданной температуре T = ${T} К):`;
	if (dim == 3)
	{
		solution.innerHTML += `<span>$$ E_a = (\\frac{2 k_B T}{3 g^{\\frac{1}{${dim}}} a_B})^{\\frac{${dim}}{${parseInt(dim) + 1}}} $$</span>`;
		solution.innerHTML += `<span>$$ E_a = {(\\frac{2}{3})}^{\\frac{3}{4}} \\times g^{-\\frac{1}{${parseInt(dim) + 1}}} a_B^{-\\frac{${dim}}{${parseInt(dim) + 1}}} k_B^{\\frac{${dim}}{${parseInt(dim) + 1}}} T^{\\frac{${dim}}{${parseInt(dim) + 1}}} $$</span>`;
		solution.innerHTML += `<span>$$ E_a = {(\\frac{2}{3})}^{\\frac{3}{4}} \\times {(${scifyNum(g, 3)})}^{-\\frac{1}{${parseInt(dim) + 1}}} \\times {(${scifyNum(aB_cm, 3)})}^{-\\frac{${dim}}{${parseInt(dim) + 1}}} \\times {(${scifyNum(kB, 3)})}^{\\frac{${dim}}{${parseInt(dim) + 1}}} \\times ${T}^{\\frac{${dim}}{${parseInt(dim) + 1}}} $$</span>`;
	}
	else if (dim == 2)
	{
		solution.innerHTML += `<span>$$ E_a = (\\frac{k_B T}{g^{\\frac{1}{${dim}}} a_B})^{\\frac{${dim}}{${parseInt(dim) + 1}}} $$</span>`;
		solution.innerHTML += `<span>$$ E_a = g^{-\\frac{1}{${parseInt(dim) + 1}}} a_B^{-\\frac{${dim}}{${parseInt(dim) + 1}}} k_B^{\\frac{${dim}}{${parseInt(dim) + 1}}} T^{\\frac{${dim}}{${parseInt(dim) + 1}}} $$</span>`;
		solution.innerHTML += `<span>$$ E_a = {(${scifyNum(g, 3)})}^{-\\frac{1}{${parseInt(dim) + 1}}} \\times {(${scifyNum(aB_cm, 3)})}^{-\\frac{${dim}}{${parseInt(dim) + 1}}} \\times {(${scifyNum(kB, 3)})}^{\\frac{${dim}}{${parseInt(dim) + 1}}} \\times ${T}^{\\frac{${dim}}{${parseInt(dim) + 1}}} $$</span>`;
	}
	solution.innerHTML += `<span>$$ E_a = ${scifyNum(Ea, 3)} eV $$</span>`;

	solution.innerHTML += "Проверка размерности:";
	solution.innerHTML += `<span>$$ [E_a] = (\\frac{\\frac{eV}{K} \\times K}{({eV}^{-1} \\times {cm}^{-${dim}})^{\\frac{1}{${dim}}} \\times cm})^{\\frac{${dim}}{${parseInt(dim) + 1}}} $$</span>`;
	solution.innerHTML += `<span>$$ [E_a] = (\\frac{eV}{{eV}^{-\\frac{1}{${dim}}} \\times {cm}^{-1} \\times cm})^{\\frac{${dim}}{${parseInt(dim) + 1}}} $$</span>`;
	solution.innerHTML += `<span>$$ [E_a] = ({eV}^{\\frac{${parseInt(dim) + 1}}{${dim}}})^{\\frac{${dim}}{${parseInt(dim) + 1}}} = eV $$</span>`;

	solution.innerHTML += "Среднее расстояние между центрами (средняя длина прыжка):";
	solution.innerHTML += `<span>$$ r_H = (g E_a)^{-\\frac{1}{${dim}}} $$</span>`;
	solution.innerHTML += `<span>$$ r_H = ((${scifyNum(g, 3)}) \\times (${scifyNum(Ea, 3)}))^{-\\frac{1}{${dim}}} $$</span>`;
	solution.innerHTML += `<span>$$ r_H = ${scifyNum(rH, 3)} cm $$</span>`;

	solution.innerHTML += "Проверка размерности:";
	solution.innerHTML += `<span>$$ [r_H] = (({eV}^{-1} \\times {cm}^{-${dim}}) \\times eV)^{-\\frac{1}{${dim}}} $$</span>`;
	solution.innerHTML += `<span>$$ [r_H] = ({cm}^{-${dim}})^{-\\frac{1}{${dim}}} $$</span>`;
	solution.innerHTML += `<span>$$ [r_H] = cm $$</span>`;

	solution.innerHTML += "Показатель экспоненты в выражении для прыжковой проводимости с переменной длиной прыжка:";
	solution.innerHTML += `<span>$$ \\sigma = \\sigma_0 \\times exp(U) $$</span>`;
	solution.innerHTML += `<span>$$ U = -{\\frac{r_H}{a_B}}-{\\frac{E{a}}{{k}_{B} T}} = -{(\\frac{T_0}{T})}^{\\frac{1}{${parseInt(dim) + 1}}} $$</span>`;
	solution.innerHTML += `<span>$$ U = -${dim == 3 ? "2.951" : "3"} \\times a_B^{-\\frac{${dim}}{${parseInt(dim) + 1}}} g^{-\\frac{1}{${parseInt(dim) + 1}}} k_B^{-\\frac{1}{${parseInt(dim) + 1}}} T^{-\\frac{1}{${parseInt(dim) + 1}}} $$</span>`;
	solution.innerHTML += `<span>$$ U = -${dim == 3 ? "2.951" : "3"} \\times (${scifyNum(aB_cm, 3)})^{-\\frac{${dim}}{${parseInt(dim) + 1}}} \\times (${scifyNum(g, 3)})^{-\\frac{1}{${parseInt(dim) + 1}}} \\times (${scifyNum(kB, 3)})^{-\\frac{1}{${parseInt(dim) + 1}}} \\times ${T}^{-\\frac{1}{${parseInt(dim) + 1}}} $$</span>`;
	solution.innerHTML += `<span>$$ U = ${scifyNum(U, 3)} $$</span>`;

	solution.innerHTML += "Проверка размерности:";
	solution.innerHTML += `<span>$$ [U] = {cm}^{-\\frac{${dim}}{${parseInt(dim) + 1}}} \\times {({eV}^{-1} \\times {cm}^{-${dim}})}^{-\\frac{1}{${parseInt(dim) + 1}}} \\times (\\frac{eV}{K})^{-\\frac{1}{${parseInt(dim) + 1}}} \\times K^{-\\frac{1}{${parseInt(dim) + 1}}} $$</span>`;
	solution.innerHTML += `<span>$$ [U] = {cm}^{-\\frac{${dim}}{${parseInt(dim) + 1}}} \\times {eV}^{\\frac{1}{${parseInt(dim) + 1}}} \\times {cm}^{\\frac{${dim}}{${parseInt(dim) + 1}}} \\times {eV}^{-\\frac{1}{${parseInt(dim) + 1}}} \\times {K}^{\\frac{1}{${parseInt(dim) + 1}}} \\times K^{-\\frac{1}{${parseInt(dim) + 1}}} $$</span>`;
	solution.innerHTML += `<span>$$ [U] = 1 $$</span>`;

	if (!isNaN(sigma0))
	{
		solution.innerHTML += "Удельная электропроводность (величина прыжковой проводимости):";
		solution.innerHTML += `<span>$$ \\sigma = \\sigma_0 \\times exp(U) $$</span>`;
		solution.innerHTML += `<span>$$ \\sigma = ${scifyNum(sigma0, 3)} \\times exp(${scifyNum(U, 3)}) $$</span>`;
		solution.innerHTML += `<span>$$ \\sigma = ${scifyNum(sigma, 3)} \\Omega^{-1} ${dim == 3 ? "\\times {cm}^{-1}" : ""} $$</span>`;
	}
	else
	{
		solution.innerHTML += "Невозможно вычислить удельную электрическую проводимость (σ), поскольку не было задано значение предэкспоненциального множителя (σ<sub>0</sub>)";
	}

	solution.innerHTML += "<h3>Ответ</h3>";
	solution.innerHTML += `<span>$$r = ${scifyNum(r, 3)} cm$$</span>`;
	solution.innerHTML += `<span>$$\\Delta E_${Nsub} = ${scifyNum(dE_ev, 3)} eV$$</span>`;
	solution.innerHTML += `<span>$$g = ${scifyNum(g, 3)} {cm}^{-${dim}} \\times {eV}^{-1}$$</span>`;
	solution.innerHTML += `<span>$$ {a_B} = ${roundFloat(aB_A, 2)} \\text{\\AA} = ${scifyNum(aB_cm, 3)} cm $$</span>`;
	solution.innerHTML += `<span>$$ E_a = ${scifyNum(Ea, 3)} eV $$</span>`;
	solution.innerHTML += `<span>$$ r_H = ${scifyNum(rH, 3)} cm $$</span>`;
	solution.innerHTML += `<span>$$ U = ${scifyNum(U, 3)} $$</span>`;
	if (!isNaN(sigma0))
	{
		solution.innerHTML += `<span>$$ \\sigma = ${scifyNum(sigma, 3)} \\Omega^{-1} ${dim == 3 ? "\\times {cm}^{-1}" : ""} $$</span>`;
	}
	else
	{
		solution.innerHTML += `<span>$$ \\frac{\\sigma}{\\sigma_0} = ${scifyNum(Math.exp(U), 3)} $$</span>`;
	}


	renderMathInElement(solution);
});


</script>
</body>
</html>
